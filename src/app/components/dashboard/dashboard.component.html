<div class="dashboard-container">

 <!-- Stats Grid -->
<div class="stats-grid">
  <mat-card 
    class="stat-card" 
    *ngFor="let key of metricsOrder; let i = index"
    [ngStyle]="{ 'background-color': metricColors[i], 'color': '#fff' }"
  >
    <mat-card-title class="fw-bold fs-3">{{ key }}</mat-card-title>

    <mat-card-content>
      <ng-container *ngIf="primaryDependent[key]">
        <!-- Main count: bigger and bold -->
        <div class="fw-bold fs-1">{{ counts[key] || 0 }}</div>

        
        <div class="fs-6 mt-1">
  <span class="d-block fs-5">Primary - {{ primaryDependent[key].primary }}</span>
  <span class="d-block fs-5">Dependent - {{ primaryDependent[key].dependent }}</span>
</div>

      </ng-container>

      <ng-container *ngIf="!primaryDependent[key]">
        <div class="fw-bold fs-1">{{ counts[key] || 0 }}</div>
      </ng-container>
    </mat-card-content>
  </mat-card>
</div>


<div class="card p-3 mt-2 border border-warning border-2 rounded-3">
   <h3 style="text-align: center;">Card</h3>
  <div class="d-flex justify-content-between text-center small gap-2">
    
    <!-- Total -->
    <div class="flex-fill card p-2 rounded">
     
      <div class="fw-bold fs-5">Total</div>
      <div class="fw-bold fs-4">{{ displayedCounts.Total }}</div>
      
    </div>

    <!-- Encoded -->
    <div class="flex-fill card p-2 rounded">
      <div class="fw-bold fs-5">Card Issue</div>
      <div class="fw-bold fs-4">{{ displayedCounts.Encoded }}</div>
    </div>

    <!-- Non-Encoded -->
    <div class="flex-fill card p-2 rounded">
      <div class="fw-bold fs-5">Block Card</div>
      <div class="fw-bold fs-4">{{ displayedCounts.NonEncoded }}</div>
    </div>

    <!-- Pending -->
    <!-- <div class="flex-fill card p-2 rounded">
      <div class="fw-bold fs-5">Pending</div>
      <div class="fw-bold fs-4">0</div>
    </div> -->

  </div>
</div>






  <!-- Controller & Vehicle Status -->
  <div class="status-summary border border-warning border-2 rounded-3">
    
    <mat-card class="status-card">
      <mat-card-title>Controllers</mat-card-title>
      <mat-card-content>
        <span class="connected-count">Connected: {{ controllerStatus.in }}</span>
        <span class="disconnected-count">Disconnected: {{ controllerStatus.out }}</span>
      </mat-card-content>
    </mat-card>

    <mat-card class="status-card">
      <mat-card-title>Vehicle ANPR Cameras</mat-card-title>
      <mat-card-content>
        <span class="connected-count">Connected: {{ vehicleStatus.in }}</span>
        <span class="disconnected-count">Disconnected: {{ vehicleStatus.out }}</span>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Visitor Details -->
<div class="visitor-details d-flex justify-content-between gap-2 border border-warning border-2 rounded-3 p-2">

  <mat-card class="visitor-card flex-fill text-center p-2 rounded">
    <mat-card-title>Total</mat-card-title>
    <mat-card-content>
      {{ visitorStatus.twoWheeler + visitorStatus.fourWheeler + 0 }}
    </mat-card-content>
  </mat-card>

  <mat-card class="visitor-card flex-fill text-center p-2 rounded">
    <mat-card-title>2-Wheeler</mat-card-title>
    <mat-card-content>{{ visitorStatus.twoWheeler }}</mat-card-content>
  </mat-card>

  <mat-card class="visitor-card flex-fill text-center p-2 rounded">
    <mat-card-title>4-Wheeler</mat-card-title>
    <mat-card-content>{{ visitorStatus.fourWheeler }}</mat-card-content>
  </mat-card>

  <mat-card class="visitor-card flex-fill text-center p-2 rounded">
    <mat-card-title>Other</mat-card-title>
    <mat-card-content>0</mat-card-content>
  </mat-card>

</div>





  <!-- Charts -->
  <div class="charts-container">
    <div class="chart-card">
      <h3>Bar Chart - Metrics</h3>
      <canvas baseChart [data]="barChartData" [options]="barChartOptions" type="bar"></canvas>
    </div>
    <div class="chart-card">
      <h3>Line Chart - Visitors & Vehicles</h3>
      <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" type="line"></canvas>
    </div>
    <div class="chart-card">
      <h3>Pie Chart - Metrics</h3>
      <canvas baseChart [data]="pieChartData" [options]="pieChartOptions" type="pie"></canvas>
    </div>
  </div>

</div>
